{% extends 'base_logged_in.html' %}
{% load custom_filters %}
{% block title %}Quotes for {{ requirement.title }} | OfferEdge{% endblock %}

{% block content %}
<div class="max-w-3xl mx-auto mt-10">
  <h2 class="text-2xl font-bold text-gray-800 mb-4">Quotes for: {{ requirement.title }}</h2>
  <p class="text-gray-600 mb-6">{{ requirement.description }}</p>

  {% if quotes %}
    <ul class="space-y-4">
      {% with finalized_id=finalized_quote_id|stringformat:"s" %}
        {% for quote in quotes %}
          {% with quote_id_str=quote.id|stringformat:"s" %}
            {% if quote_id_str == finalized_id %}
              {% include "partials/quote_card.html" with quote=quote finalized="True" req=requirement userid=userid finalized_quote_id=finalized_id %}
            {% else %}
              {% include "partials/quote_card.html" with quote=quote finalized="False" req=requirement userid=userid finalized_quote_id=finalized_id %}
            {% endif %}
          {% endwith %}
        {% endfor %}
      {% endwith %}
    </ul>
  {% else %}
    <p class="text-gray-600">No quotes have been placed yet.</p>
  {% endif %}
</div>
{% endblock %}