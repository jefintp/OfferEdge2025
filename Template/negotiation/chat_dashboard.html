{% extends 'base_logged_in.html' %}
{% block title %}Your Negotiations | OfferEdge{% endblock %}
{% block content %}
<div class="max-w-3xl mx-auto mt-10 bg-white p-6 rounded-lg shadow-md">
  <h2 class="text-2xl font-bold text-blue-600 mb-6">Your Negotiation Sessions</h2>
{% for item in session_data %}
  {% with session=item.session quote=item.quote %}
    {% if quote %}
      <li class="border p-4 rounded-lg shadow-sm hover:shadow-md transition">
            <div class="flex justify-between items-center">
              <div>
                <p class="font-semibold text-gray-800">
                  Quote for: {{ session.quote.req_id }}
                </p>
                <p class="text-sm text-gray-500">
                  Started: {{ session.created_on|date:"M d, Y H:i" }}
                </p>
              </div>
              <a href="/negotiation/chat/{{ session.id }}/"
                 class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">
                Open Chat
              </a>
            </div>
          </li>
    {% else %}
      <li>Quote not found for session {{ session.id }}</li>
    {% endif %}
  {% endwith %}
{% endfor %}


  <!-- {% if sessions %}
    <ul class="space-y-4">
      {% for session in sessions %}
        {% if session.quote %}
          <li class="border p-4 rounded-lg shadow-sm hover:shadow-md transition">
            <div class="flex justify-between items-center">
              <div>
                <p class="font-semibold text-gray-800">
                  Quote for: {{ session.quote.req_id }}
                </p>
                <p class="text-sm text-gray-500">
                  Started: {{ session.created_on|date:"M d, Y H:i" }}
                </p>
              </div>
              <a href="/negotiation/chat/{{ session.id }}/"
                 class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">
                Open Chat
              </a>
            </div>
          </li>
        {% else %}
          <li class="border p-4 rounded-lg bg-red-50 text-red-600">
            Quote not found for session {{ session.id }}
          </li>
        {% endif %}
      {% endfor %}
    </ul>
  {% else %}
    <p class="text-gray-600">You have no active negotiation chats yet.</p>
  {% endif %} -->
</div>
{% endblock %}