{% extends 'base_logged_in.html' %}
{% block title %}Moderation Panel | OfferEdge{% endblock %}
{% block content %}
<main class="p-6 bg-gray-50 min-h-screen">
  <h1 class="text-3xl font-bold text-gray-800 mb-6">🛡️ Moderation Panel</h1>

  <!-- 🔹 Users Table -->
  <section class="mb-10">
    <h2 class="text-xl font-semibold text-gray-700 mb-4">All Users</h2>
    <table class="w-full bg-white shadow rounded">
      <thead class="bg-gray-100">
        <tr>
          <th class="p-2 text-left">UserID</th>
          <th class="p-2 text-left">Buyer</th>
          <th class="p-2 text-left">Seller</th>
          <th class="p-2 text-left">Admin</th>
          <th class="p-2 text-left">Banned</th>
        </tr>
      </thead>
      <tbody>
        {% for user in users %}
        <tr class="border-t">
          <td class="p-2">{{ user.userid }}</td>
          <td class="p-2">{% if user.is_buyer %}✅{% else %}—{% endif %}</td>
          <td class="p-2">{% if user.is_seller %}✅{% else %}—{% endif %}</td>
          <td class="p-2">{% if user.is_admin %}🛡️{% else %}—{% endif %}</td>
          <td class="p-2 text-red-600 font-bold">{% if user.is_banned %}🚫{% else %}—{% endif %}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </section>

  <!-- 🔹 Requirements Table -->
  <section>
    <h2 class="text-xl font-semibold text-gray-700 mb-4">All Requirements</h2>
    <ul class="space-y-4">
      {% for req in requirements %}
      <li class="bg-white p-4 rounded shadow">
        <h3 class="text-lg font-bold text-blue-600">{{ req.title }}</h3>
        <p class="text-sm text-gray-700">{{ req.description }}</p>
        <p class="text-xs text-gray-500">Posted by: {{ req.buyerid }} | {{ req.createdAt }}</p>

        <!-- 🗑️ Delete Button -->
        <form action="/requirements/delete/{{ req.id }}"
 method="POST" onsubmit="return confirm('Are you sure you want to delete this requirement?');" class="mt-2">
          {% csrf_token %}
          <button type="submit" class="text-red-600 font-semibold hover:underline">🗑️ Delete</button>
        </form>
      </li>
      {% endfor %}
    </ul>
  </section>
</main>
{% endblock %}

