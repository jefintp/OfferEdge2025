{% extends 'base.html' %}
{% block title %}Post Requirement | OfferEdge{% endblock %}
{% block content %}
<div class="max-w-xl mx-auto mt-10 bg-white p-6 rounded shadow">
  <h2 class="text-2xl font-bold mb-6 text-center text-blue-600">Post a Requirement</h2>
  <form method="POST" class="space-y-4">
    {% csrf_token %}
    
    <!-- ðŸ“¦ Requirement Fields -->
    {{ form.title.label_tag }} {{ form.title }}
    {{ form.description.label_tag }} {{ form.description }}
    {{ form.quantity.label_tag }} {{ form.quantity }}
    {{ form.expectedPriceRange.label_tag }} {{ form.expectedPriceRange }}
    {{ form.deadline.label_tag }} {{ form.deadline }}

    <!-- ðŸ”„ Negotiation Preference -->
    <div class="mt-6">
      <label class="block font-semibold mb-2">Negotiation Preference</label>
      {{ form.negotiation_mode }}
    </div>

    <!-- ðŸ’¬ Trigger Price (conditional) -->
    <div class="mt-4" id="negotiation-trigger" style="display:none;">
      <label class="block font-semibold mb-2">Enable Negotiation Below Price</label>
      {{ form.negotiation_trigger_price }}
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const radios = document.querySelectorAll('input[name="negotiation_mode"]');
        const triggerDiv = document.getElementById("negotiation-trigger");

        radios.forEach(radio => {
          radio.addEventListener("change", () => {
            triggerDiv.style.display = radio.value === "negotiation" ? "block" : "none";
          });
        });
      });
    </script>

    <button type="submit" class="w-full bg-blue-600 text-white py-2 rounded hover:bg-blue-700">Submit</button>
  </form>
</div>
{% endblock %}